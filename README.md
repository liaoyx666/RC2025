2025年RC挑战赛老东西代码

## 代码框架

代码的基本架构使用cpp进行封装，其中包含电机类和各种工具的类封装

![image](https://github.com/user-attachments/assets/3f265dbb-dea9-4834-91cd-4b6c1cf02d6b)

## 代码管理建议

### 关于代码整合

建议代码管理建议有专人来进行负责，负责对每一个队员编写的代码进行整合调试。

- 方案一：使用git或者gitee进行管理。
- 方案二：使用压缩包，压缩包必须标注代码日期和

### 代码文件格式

在每一个文件的最上面都必须标注文件的**创建日期和代码的贡献者**。如果有代码较大改动，需要在顶部的文件说明出注明修改者和修改日期。

代码块的功能也要打上一个功能注释，注明是干什么，形成良好的注释习惯

### 关于分工

建议是一个机构就由一个对应的队员进行负责，相关文件都在代码框架下独立一个文件。例如，负责action数据的同学就专门建立一个action的cpp文件和h文件，在里面编写初始化代码和数据处理代码，最后在通讯处理的文件中进行中断处理和在config中进行初始化函数的调用。避免不同队员间的代码出现混叠现象



## 代码的后续维护和改进建议

### 新增电机类

- 后续如果更换**新电机**，则需要在电机类中添加**新的电机封装**。

- 务必要采用**统一的接口**，最后在机构的类封装中把电机类型和电机调用命令进行替换即可

### 新的模块

由于这般代码对于整车封装还是较为原始，后续肯定会有新的功能和模块加入

#### 定位模块

由于挑战赛大概率不会上ROS，所以定位方还是依赖于action和激光

对于action，建议增加一个action的数据结构体到数据池中，然后创建一个action的类对协议进行封装。最后通过串口DMA中断读取数据(在中断里，把接受action数据的**串口数据结构体**通过**队列**发送到对应的处理任务中)

激光也是同理

#### XBOX

xbox手柄也可以通过esp32外挂串口接入主控中，同样也是可以进行封装，以方便使用

#### 视觉接口

可以通过**虚拟串口**来实现数据包的传输，这部分可能会涉及**BSP**的改动。需要额外**小心**，确保没有问题再进行相关代码的整合

### 路径规划算法

路径规划算法在单片机中推荐使用**三次B样条曲线**或者**贝塞尔曲线**进行规划，但是由于今年的比赛并不是特别的依赖于自动路径。相反跟依赖于**点对点的点跟踪**，通过圆环半径和锁定发射角来实现半自动功能，在这里建议可以使用**PD控制器**来进行点跟踪或者有能够快速上手的跟踪算法，可能给PD加上前馈进行控制？关键还是点位的锁定要准

